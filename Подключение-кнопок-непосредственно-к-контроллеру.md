### 1. Пример подключения кнопок на рисунке ниже:

![](https://github.com/FreeJoy-Team/FreeJoyConfigurator/blob/master/images/rus_guide/K1.jpg)

Где: ![](https://github.com/FreeJoy-Team/FreeJoyConfigurator/blob/master/images/rus_guide/K1.1.jpg) - Диод 1N4148.

### 2. Назначение контактов контроллера (вкладка Pin Config): 

![](https://github.com/FreeJoy-Team/FreeJoyConfigurator/blob/master/images/rus_guide/K2.jpg)

Без применения сдвиговых регистров кнопки можно подключить тремя разными образами: 

Одиночные кнопки (количество кнопок назначенных таким образом можно видеть в строке Single Buttons поля Current Config с правой стороны конфигуратора):
* Button_Gnd – кнопка соединяет этот контакт с 0 (контакты с 0 питания помечены «G»)
* Button_Vcc – кнопка соединяет этот контакта с контактом питания (контакты питания помечены «3,3»)
При помощи матрицы кнопок, где:
* Button_Row и Button_Column – строки и столбцы матрицы соответственно. Количество строк и столбцов матрицы перечислено в строках Rows of buttons и Columns of buttons поля Current Config с правой стороны конфигуратора. При этом, количество кнопок матрицы можно рассчитать перемножив число строк и столбцов.

Всем кнопкам (одновременно) можно задать время дребезга – поле «Button debounce time» раздела Advanced Settings. При этом нажатия на кнопку короче указанного в этом поле времени не учитываются. Увеличение этого параметра позволяет избежать многократного срабатывания кнопок при однократном нажатии, если кнопки невысокого качества.

1. Назначение логических кнопок (вкладка Button Config). Далее: Физическая кнопка – физически существующая пара контактов подключенная каким-либо образом к контроллеру (одиночная кнопка, кнопка из матрицы кнопок, кнопка подключенная к сдвиговому регистру либо тумблер подключенным одним из этих способов). Список Физических кнопок и их состояние (красный – разомкнута, зеленый – замкнута) можно видеть в поле Physical Buttons вкладки Button Config. Логическая кнопка – информация, передаваемая в компьютер о нажатии какой-либо кнопки. Список логических кнопок, назначенных на них физических кнопок, функции кнопок и назначенные на них шифты можно видеть в поле Logical Buttons вкладки Button Config. Рисунок К3 2.1.3.1. На этой вкладке в поле Logical buttons в строке с номером логической кнопки необходимо указать соответствующий ей номер физической кнопки. (Выяснить номер конкретной физической кнопки можно нажав ее. В поле Physical Buttons кружок с номером этой физической кнопки подсветится зеленым.) После назначения логической кнопки и записи конфигурации в контроллер можно проверить ее работу. При нажатии на физ. кнопку строка с описанием логической кнопки будет подсвечена зеленым в соответствии с логикой работы функции кнопки. Физическая кнопка может фигурировать в описании любого числа логических кнопок. 2.1.3.2. Назначить функцию кнопки: Button_inverted – инвертированная кнопка (если физ. Нажата, то лог. отжата. И наоборот) Button_normal – нормальная кнопка. Button_Toggle – кнопка-тумблер, нажатие физ. кнопки инвертирует состояние лог. кнопки (Если лог. кнопка была не нажата, то нажатие физ. кнопки сделает ее нажатой до тех пор, пока не будет опять нажата физ. кнопка.) Функции для тумблеров: ToggleSwich_OnOff – при замыкании и размыкании контактов тумблера подключенных к физ. кнопке генерируется нажатие логической кнопки (время нажатия лог. кнопки задается в поле Toggle Press Time раздела Advanced Settings). ToggleSwich_On - при замыкании контактов тумблера подключенных к физ кнопке генерируется нажатие логической кнопки (время нажатия задается в поле Toggle Press Time раздела Advanced Settings) ToggleSwich_Off - при размыкании контактов тумблера подключенных к физ кнопке генерируется нажатие логической кнопки (время нажатия задается в поле Toggle Press Time раздела Advanced Settings) Функции для HAT-переключателей (многопозиционных кнопок/хаток): PovX_Down, PovX_Up, PovX_Left, PovX_Right (где X – номер хатки) – нажатие направления вниз/вверх/влево/вправо соответствующей хатки. Функция радиокнопок: RadioButtonX (Где X- номер группы радиокнопок) – все кнопки принадлежащие одной группе радиокнопок будут работать следующим образом: При кратковременном нажатии любой из физ. кнопок группы все логические кнопки группы отжимаются и остается нажатой только логическая кнопка сопоставленная нажатой физической кнопке. Логическая кнопка остается нажатой до тех пор, пока не будет нажата другая кнопка группы. При включении контроллера будет включена первая радиокнопка в списке. Радиокнопки можно использовать в качестве шифтов. Sequental_Button – режим последовательного переключения – при назначении одной физической кнопки на несколько логических с выставленной функцией перебора, при нажатии физической кнопки будет отжиматься текущая нажатая логическая кнопка и нажиматься следующая логическая кнопка из списка. Функции экодеров: Encoder_A, Encoder_B – см. Подключение энкодеров. Использование шифтов: В качестве шифта может быть использована любая логическая кнопка. При этом логическая кнопка, которой назначен шифт сработает, если выполняется два условия: логическая кнопка которая назначена шифтом в нажатом состоянии, и логическая кнопка которой назначен шифт в нажатом состоянии. Если одной физической кнопке назначены один или несколько шифтов и в одной строке не назначен шифт, то лог. кнопка которой не назначен шифт сработает только если ни один шифт не нажат.
1. Окончательно работу кнопок можно проверить (для Windows 10) «Пуск», «Параметры», «Устройства», «Устройства и принтеры» правой кнопкой на устройство, «Параметры игровых устройств управления», выбрать устройство, «Свойства». Либо при числе кнопок более 32 шт. программой VKB_Btn Tester [ссылка].
